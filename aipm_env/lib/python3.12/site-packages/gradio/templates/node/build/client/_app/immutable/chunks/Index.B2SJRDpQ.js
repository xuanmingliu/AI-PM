import{SvelteComponent as Ae,init as Ne,safe_not_equal as Ve,element as B,space as le,text as Ye,claim_element as A,children as N,detach as v,claim_space as ie,claim_text as Ze,attr as p,set_style as Be,insert_hydration as F,append_hydration as L,listen as z,set_data as xe,noop as pe,createEventDispatcher as $e,create_component as x,claim_component as $,toggle_class as ge,mount_component as ee,transition_in as k,group_outros as oe,transition_out as D,check_outros as re,destroy_component as te,onMount as Lt,tick as be,empty as Re,binding_callbacks as me,bind as Ce,add_flush_callback as De,add_render_callback as Le,create_in_transition as Mt,set_input_value as ke,run_all as et,ensure_array_like as Pe,destroy_each as Rt,create_bidirectional_transition as Ie,flush as U,assign as Pt,get_spread_update as Ut,get_spread_object as jt}from"../../../svelte/svelte.js";import{fade as ve}from"../../../svelte/svelte-submodules.js";import{y as Jt,O as Ht,G as Xt,F as qt,B as zt,S as Ft}from"./2.qheU58Mf.js";import{P as Gt}from"./Plus.aV-xa-_T.js";import{T as Kt}from"./Trash.D4IfxcH_.js";import{D as tt,c as Qt}from"./Dropdown.CQPYNQJC.js";/* empty css                                              */import{default as Cn}from"./Example.PQjTM3-g.js";function Wt(n){let t,e,l,o,s,i,u;return{c(){t=B("div"),e=B("button"),l=le(),o=B("span"),s=Ye(n[1]),this.h()},l(a){t=A(a,"DIV",{class:!0,style:!0});var c=N(t);e=A(c,"BUTTON",{role:!0,"aria-checked":!0,class:!0});var h=N(e);h.forEach(v),l=ie(c),o=A(c,"SPAN",{});var C=N(o);s=Ze(C,n[1]),C.forEach(v),c.forEach(v),this.h()},h(){p(e,"role","switch"),p(e,"aria-checked",n[0]),e.disabled=n[2],p(e,"class","svelte-1wr5wa"),p(t,"class","s s--slider svelte-1wr5wa"),Be(t,"font-size","var(--font-size-sm)px")},m(a,c){F(a,t,c),L(t,e),L(t,l),L(t,o),L(o,s),i||(u=z(e,"click",n[3]),i=!0)},p(a,[c]){c&1&&p(e,"aria-checked",a[0]),c&4&&(e.disabled=a[2]),c&2&&xe(s,a[1])},i:pe,o:pe,d(a){a&&v(t),i=!1,u()}}}function Yt(n,t,e){let{label:l}=t,{checked:o=!1}=t,{disabled:s=!1}=t;const i=$e();function u(a){const h=a.target.getAttribute("aria-checked");e(0,o=h!=="true"),i("click",{checked:o})}return n.$$set=a=>{"label"in a&&e(1,l=a.label),"checked"in a&&e(0,o=a.checked),"disabled"in a&&e(2,s=a.disabled)},[o,l,s,u]}class Zt extends Ae{constructor(t){super(),Ne(this,t,Yt,Wt,Ve,{label:1,checked:0,disabled:2})}}function Ue(n,t,e){const l=n.slice();return l[74]=t[e],l[75]=t,l[76]=e,l}function je(n){let t,e,l,o;const s=[$t,xt],i=[];function u(a,c){return a[23]?0:1}return t=u(n),e=i[t]=s[t](n),{c(){e.c(),l=Re()},l(a){e.l(a),l=Re()},m(a,c){i[t].m(a,c),F(a,l,c),o=!0},p(a,c){let h=t;t=u(a),t===h?i[t].p(a,c):(oe(),D(i[h],1,1,()=>{i[h]=null}),re(),e=i[t],e?e.p(a,c):(e=i[t]=s[t](a),e.c()),k(e,1),e.m(l.parentNode,l))},i(a){o||(k(e),o=!0)},o(a){D(e),o=!1},d(a){a&&v(l),i[t].d(a)}}}function xt(n){let t,e,l,o,s;return e=new Xt({}),{c(){t=B("button"),x(e.$$.fragment),this.h()},l(i){t=A(i,"BUTTON",{class:!0,"aria-label":!0,"aria-roledescription":!0});var u=N(t);$(e.$$.fragment,u),u.forEach(v),this.h()},h(){p(t,"class","copy-button svelte-1fonppu"),p(t,"aria-label","Copy"),p(t,"aria-roledescription","Copy text")},m(i,u){F(i,t,u),ee(e,t,null),l=!0,o||(s=z(t,"click",n[34]),o=!0)},p:pe,i(i){l||(k(e.$$.fragment,i),l=!0)},o(i){D(e.$$.fragment,i),l=!1},d(i){i&&v(t),te(e),o=!1,s()}}}function $t(n){let t,e,l,o;return e=new qt({}),{c(){t=B("button"),x(e.$$.fragment),this.h()},l(s){t=A(s,"BUTTON",{class:!0,"aria-label":!0,"aria-roledescription":!0});var i=N(t);$(e.$$.fragment,i),i.forEach(v),this.h()},h(){p(t,"class","copy-button svelte-1fonppu"),p(t,"aria-label","Copied"),p(t,"aria-roledescription","Text copied")},m(s,i){F(s,t,i),ee(e,t,null),o=!0},p:pe,i(s){o||(k(e.$$.fragment,s),s&&(l||Le(()=>{l=Mt(t,ve,{duration:300}),l.start()})),o=!0)},o(s){D(e.$$.fragment,s),o=!1},d(s){s&&v(t),te(e)}}}function en(n){let t;return{c(){t=Ye(n[4])},l(e){t=Ze(e,n[4])},m(e,l){F(e,t,l)},p(e,l){l[0]&16&&xe(t,e[4])},d(e){e&&v(t)}}}function Je(n){let t,e,l,o;function s(u){n[39](u)}let i={label:"Plain Text"};return n[13]!==void 0&&(i.checked=n[13]),e=new Zt({props:i}),me.push(()=>Ce(e,"checked",s)),e.$on("click",n[40]),{c(){t=B("div"),x(e.$$.fragment),this.h()},l(u){t=A(u,"DIV",{class:!0});var a=N(t);$(e.$$.fragment,a),a.forEach(v),this.h()},h(){p(t,"class","switch-container top-switch svelte-1fonppu")},m(u,a){F(u,t,a),ee(e,t,null),o=!0},p(u,a){const c={};!l&&a[0]&8192&&(l=!0,c.checked=u[13],De(()=>l=!1)),e.$set(c)},i(u){o||(k(e.$$.fragment,u),o=!0)},o(u){D(e.$$.fragment,u),o=!1},d(u){u&&v(t),te(e)}}}function tn(n){let t,e,l,o,s,i,u=n[17]&&He(n);return{c(){t=B("div"),e=B("textarea"),l=le(),u&&u.c(),this.h()},l(a){t=A(a,"DIV",{class:!0});var c=N(t);e=A(c,"TEXTAREA",{"data-testid":!0,placeholder:!0,rows:!0,class:!0}),N(e).forEach(v),l=ie(c),u&&u.l(c),c.forEach(v),this.h()},h(){p(e,"data-testid","textbox"),p(e,"placeholder",n[3]),p(e,"rows",5),e.disabled=n[6],p(e,"class","svelte-1fonppu"),p(t,"class","textarea-container")},m(a,c){F(a,t,c),L(t,e),ke(e,n[24]),n[61](e),L(t,l),u&&u.m(t,null),o=!0,s||(i=[z(e,"input",n[57]),z(e,"input",n[58]),z(e,"focus",n[59]),z(e,"keydown",n[60])],s=!0)},p(a,c){(!o||c[0]&8)&&p(e,"placeholder",a[3]),(!o||c[0]&64)&&(e.disabled=a[6]),c[0]&16777216&&ke(e,a[24]),a[17]?u?(u.p(a,c),c[0]&131072&&k(u,1)):(u=He(a),u.c(),k(u,1),u.m(t,null)):u&&(oe(),D(u,1,1,()=>{u=null}),re())},i(a){o||(k(u),o=!0)},o(a){D(u),o=!1},d(a){a&&v(t),n[61](null),u&&u.d(),s=!1,et(i)}}}function nn(n){let t,e,l=Pe(n[14]),o=[];for(let i=0;i<l.length;i+=1)o[i]=ze(Ue(n,l,i));const s=i=>D(o[i],1,1,()=>{o[i]=null});return{c(){t=B("div");for(let i=0;i<o.length;i+=1)o[i].c();this.h()},l(i){t=A(i,"DIV",{class:!0});var u=N(t);for(let a=0;a<o.length;a+=1)o[a].l(u);u.forEach(v),this.h()},h(){p(t,"class","dialogue-container svelte-1fonppu")},m(i,u){F(i,t,u);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(t,null);n[56](t),e=!0},p(i,u){if(u[0]&2120139342|u[1]&3){l=Pe(i[14]);let a;for(a=0;a<l.length;a+=1){const c=Ue(i,l,a);o[a]?(o[a].p(c,u),k(o[a],1)):(o[a]=ze(c),o[a].c(),k(o[a],1),o[a].m(t,null))}for(oe(),a=l.length;a<o.length;a+=1)s(a);re()}},i(i){if(!e){for(let u=0;u<l.length;u+=1)k(o[u]);e=!0}},o(i){o=o.filter(Boolean);for(let u=0;u<o.length;u+=1)D(o[u]);e=!1},d(i){i&&v(t),Rt(o,i),n[56](null)}}}function He(n){let t,e,l,o;return e=new tt({props:{choices:n[2].map(Qe),filtered_indices:n[20].map(n[62]),active_index:n[20].map(n[63])[n[19]],show_options:!0}}),e.$on("change",n[64]),{c(){t=B("div"),x(e.$$.fragment),this.h()},l(s){t=A(s,"DIV",{id:!0,class:!0});var i=N(t);$(e.$$.fragment,i),i.forEach(v),this.h()},h(){p(t,"id","tag-menu"),p(t,"class","tag-menu-plain-text svelte-1fonppu")},m(s,i){F(s,t,i),ee(e,t,null),o=!0},p(s,i){const u={};i[0]&4&&(u.choices=s[2].map(Qe)),i[0]&1048580&&(u.filtered_indices=s[20].map(s[62])),i[0]&1572868&&(u.active_index=s[20].map(s[63])[s[19]]),e.$set(u)},i(s){o||(k(e.$$.fragment,s),s&&Le(()=>{o&&(l||(l=Ie(t,ve,{duration:100},!0)),l.run(1))}),o=!0)},o(s){D(e.$$.fragment,s),s&&(l||(l=Ie(t,ve,{duration:100},!1)),l.run(0)),o=!1},d(s){s&&v(t),te(e),s&&l&&l.end()}}}function sn(n){let t,e,l;function o(u){n[42](u,n[74])}function s(){return n[43](n[76],n[74])}let i={choices:n[1].map(Ge),show_label:!1,container:!0,label:""};return n[74].speaker!==void 0&&(i.value=n[74].speaker),t=new Qt({props:i}),me.push(()=>Ce(t,"value",o)),t.$on("change",s),{c(){x(t.$$.fragment)},l(u){$(t.$$.fragment,u)},m(u,a){ee(t,u,a),l=!0},p(u,a){n=u;const c={};a[0]&2&&(c.choices=n[1].map(Ge)),!e&&a[0]&16384&&(e=!0,c.value=n[74].speaker,De(()=>e=!1)),t.$set(c)},i(u){l||(k(t.$$.fragment,u),l=!0)},o(u){D(t.$$.fragment,u),l=!1},d(u){te(t,u)}}}function ln(n){let t,e,l;function o(){n[41].call(t,n[75],n[76])}return{c(){t=B("textarea"),this.h()},l(s){t=A(s,"TEXTAREA",{rows:!0,class:!0}),N(t).forEach(v),this.h()},h(){t.disabled=n[6],p(t,"rows","1"),t.readOnly=!0,p(t,"class","svelte-1fonppu")},m(s,i){F(s,t,i),ke(t,n[74].speaker),e||(l=z(t,"input",o),e=!0)},p(s,i){n=s,i[0]&64&&(t.disabled=n[6]),i[0]&16384&&ke(t,n[74].speaker)},i:pe,o:pe,d(s){s&&v(t),e=!1,l()}}}function Xe(n){let t,e,l,o;return e=new tt({props:{choices:n[2].map(Ke),filtered_indices:n[20].map(n[51]),active_index:n[20].map(n[52])[n[19]],show_options:!0,offset_from_top:n[22],from_top:!0}}),e.$on("change",n[53]),{c(){t=B("div"),x(e.$$.fragment),this.h()},l(s){t=A(s,"DIV",{id:!0,class:!0});var i=N(t);$(e.$$.fragment,i),i.forEach(v),this.h()},h(){p(t,"id","tag-menu"),p(t,"class","tag-menu svelte-1fonppu")},m(s,i){F(s,t,i),ee(e,t,null),o=!0},p(s,i){const u={};i[0]&4&&(u.choices=s[2].map(Ke)),i[0]&1048580&&(u.filtered_indices=s[20].map(s[51])),i[0]&1572868&&(u.active_index=s[20].map(s[52])[s[19]]),i[0]&4194304&&(u.offset_from_top=s[22]),e.$set(u)},i(s){o||(k(e.$$.fragment,s),s&&Le(()=>{o&&(l||(l=Ie(t,ve,{duration:100},!0)),l.run(1))}),o=!0)},o(s){D(e.$$.fragment,s),s&&(l||(l=Ie(t,ve,{duration:100},!1)),l.run(0)),o=!1},d(s){s&&v(t),te(e),s&&l&&l.end()}}}function qe(n){let t,e,l,o,s,i;l=new Gt({});function u(){return n[54](n[76])}return{c(){t=B("div"),e=B("button"),x(l.$$.fragment),this.h()},l(a){t=A(a,"DIV",{class:!0});var c=N(t);e=A(c,"BUTTON",{class:!0,"aria-label":!0});var h=N(e);$(l.$$.fragment,h),h.forEach(v),c.forEach(v),this.h()},h(){p(e,"class","add-button svelte-1fonppu"),p(e,"aria-label","Add new line"),e.disabled=n[6],p(t,"class","svelte-1fonppu"),ge(t,"action-column",n[76]==0),ge(t,"hidden",n[6])},m(a,c){F(a,t,c),L(t,e),ee(l,e,null),o=!0,s||(i=z(e,"click",u),s=!0)},p(a,c){n=a,(!o||c[0]&64)&&(e.disabled=n[6]),(!o||c[0]&64)&&ge(t,"hidden",n[6])},i(a){o||(k(l.$$.fragment,a),o=!0)},o(a){D(l.$$.fragment,a),o=!1},d(a){a&&v(t),te(l),s=!1,i()}}}function ze(n){let t,e,l,o,s,i,u,a,c=n[76],h,C,m,T,H,M,Q,g,b,_;const q=[ln,sn],I=[];function X(O,f){return O[6]?0:1}l=X(n),o=I[l]=q[l](n);function V(){return n[44](n[74])}function W(){n[46].call(a,n[75],n[76])}function S(...O){return n[47](n[76],...O)}function G(...O){return n[48](n[76],...O)}function Y(...O){return n[49](n[76],...O)}const ce=()=>n[50](a,c),ae=()=>n[50](null,c);let y=n[17]&&n[18]===n[76]&&Xe(n),w=(n[9]==null||n[9]&&n[76]<n[9]-1)&&qe(n);M=new Kt({});function _e(){return n[55](n[76])}return{c(){t=B("div"),e=B("div"),o.c(),s=le(),i=B("div"),u=B("div"),a=B("textarea"),h=le(),y&&y.c(),C=le(),w&&w.c(),m=le(),T=B("div"),H=B("button"),x(M.$$.fragment),Q=le(),this.h()},l(O){t=A(O,"DIV",{class:!0,style:!0});var f=N(t);e=A(f,"DIV",{class:!0,role:!0,tabindex:!0});var ne=N(e);o.l(ne),ne.forEach(v),s=ie(f),i=A(f,"DIV",{class:!0});var we=N(i);u=A(we,"DIV",{class:!0});var he=N(u);a=A(he,"TEXTAREA",{placeholder:!0,rows:!0,class:!0}),N(a).forEach(v),h=ie(he),y&&y.l(he),he.forEach(v),we.forEach(v),C=ie(f),w&&w.l(f),m=ie(f),T=A(f,"DIV",{class:!0});var de=N(T);H=A(de,"BUTTON",{class:!0,"aria-label":!0});var ue=N(H);$(M.$$.fragment,ue),ue.forEach(v),de.forEach(v),Q=ie(f),f.forEach(v),this.h()},h(){p(e,"class","speaker-column svelte-1fonppu"),p(e,"role","button"),p(e,"tabindex","0"),p(a,"placeholder",n[3]),a.disabled=n[6],p(a,"rows","1"),p(a,"class","svelte-1fonppu"),p(u,"class","input-container svelte-1fonppu"),p(i,"class","text-column svelte-1fonppu"),p(H,"class","delete-button svelte-1fonppu"),p(H,"aria-label","Remove current line"),H.disabled=n[6],p(T,"class","action-column svelte-1fonppu"),ge(T,"hidden",n[6]||n[76]==0),p(t,"class","dialogue-line svelte-1fonppu"),Be(t,"--speaker-bg-color",n[6]&&(n[25]===null||n[25]===n[74].speaker)&&n[26][n[74].speaker]||"transparent")},m(O,f){F(O,t,f),L(t,e),I[l].m(e,null),L(t,s),L(t,i),L(i,u),L(u,a),ke(a,n[74].text),ce(),L(u,h),y&&y.m(u,null),L(t,C),w&&w.m(t,null),L(t,m),L(t,T),L(T,H),ee(M,H,null),L(t,Q),g=!0,b||(_=[z(e,"mouseenter",V),z(e,"mouseleave",n[45]),z(a,"input",W),z(a,"input",S),z(a,"focus",G),z(a,"keydown",Y),z(H,"click",_e)],b=!0)},p(O,f){n=O;let ne=l;l=X(n),l===ne?I[l].p(n,f):(oe(),D(I[ne],1,1,()=>{I[ne]=null}),re(),o=I[l],o?o.p(n,f):(o=I[l]=q[l](n),o.c()),k(o,1),o.m(e,null)),(!g||f[0]&8)&&p(a,"placeholder",n[3]),(!g||f[0]&64)&&(a.disabled=n[6]),f[0]&16384&&ke(a,n[74].text),c!==n[76]&&(ae(),c=n[76],ce()),n[17]&&n[18]===n[76]?y?(y.p(n,f),f[0]&393216&&k(y,1)):(y=Xe(n),y.c(),k(y,1),y.m(u,null)):y&&(oe(),D(y,1,1,()=>{y=null}),re()),n[9]==null||n[9]&&n[76]<n[9]-1?w?(w.p(n,f),f[0]&512&&k(w,1)):(w=qe(n),w.c(),k(w,1),w.m(t,m)):w&&(oe(),D(w,1,1,()=>{w=null}),re()),(!g||f[0]&64)&&(H.disabled=n[6]),(!g||f[0]&64)&&ge(T,"hidden",n[6]||n[76]==0),(!g||f[0]&100679744)&&Be(t,"--speaker-bg-color",n[6]&&(n[25]===null||n[25]===n[74].speaker)&&n[26][n[74].speaker]||"transparent")},i(O){g||(k(o),k(y),k(w),k(M.$$.fragment,O),g=!0)},o(O){D(o),D(y),D(w),D(M.$$.fragment,O),g=!1},d(O){O&&v(t),I[l].d(),ae(),y&&y.d(),w&&w.d(),te(M),b=!1,et(_)}}}function Fe(n){let t,e,l,o,s,i;return l=new Ht({}),{c(){t=B("div"),e=B("button"),x(l.$$.fragment),this.h()},l(u){t=A(u,"DIV",{class:!0});var a=N(t);e=A(a,"BUTTON",{class:!0});var c=N(e);$(l.$$.fragment,c),c.forEach(v),a.forEach(v),this.h()},h(){p(e,"class","submit-button svelte-1fonppu"),e.disabled=n[6],p(t,"class","submit-container svelte-1fonppu")},m(u,a){F(u,t,a),L(t,e),ee(l,e,null),o=!0,s||(i=z(e,"click",n[35]),s=!0)},p(u,a){(!o||a[0]&64)&&(e.disabled=u[6])},i(u){o||(k(l.$$.fragment,u),o=!0)},o(u){D(l.$$.fragment,u),o=!1},d(u){u&&v(t),te(l),s=!1,i()}}}function on(n){let t,e,l,o,s,i,u,a,c,h,C,m=n[7]&&n[10]&&je(n);l=new Jt({props:{show_label:n[7],info:n[5],$$slots:{default:[en]},$$scope:{ctx:n}}});let T=n[1].length!==0&&Je(n);const H=[nn,tn],M=[];function Q(b,_){return b[13]?1:0}i=Q(n),u=M[i]=H[i](n);let g=n[11]&&!n[6]&&Fe(n);return{c(){t=B("label"),m&&m.c(),e=le(),x(l.$$.fragment),o=le(),T&&T.c(),s=le(),u.c(),a=le(),g&&g.c(),this.h()},l(b){t=A(b,"LABEL",{class:!0});var _=N(t);m&&m.l(_),e=ie(_),$(l.$$.fragment,_),o=ie(_),T&&T.l(_),s=ie(_),u.l(_),a=ie(_),g&&g.l(_),_.forEach(v),this.h()},h(){p(t,"class","svelte-1fonppu"),ge(t,"container",n[8])},m(b,_){F(b,t,_),m&&m.m(t,null),L(t,e),ee(l,t,null),L(t,o),T&&T.m(t,null),L(t,s),M[i].m(t,null),L(t,a),g&&g.m(t,null),c=!0,h||(C=z(window,"click",n[33]),h=!0)},p(b,_){b[7]&&b[10]?m?(m.p(b,_),_[0]&1152&&k(m,1)):(m=je(b),m.c(),k(m,1),m.m(t,e)):m&&(oe(),D(m,1,1,()=>{m=null}),re());const q={};_[0]&128&&(q.show_label=b[7]),_[0]&32&&(q.info=b[5]),_[0]&16|_[2]&32768&&(q.$$scope={dirty:_,ctx:b}),l.$set(q),b[1].length!==0?T?(T.p(b,_),_[0]&2&&k(T,1)):(T=Je(b),T.c(),k(T,1),T.m(t,s)):T&&(oe(),D(T,1,1,()=>{T=null}),re());let I=i;i=Q(b),i===I?M[i].p(b,_):(oe(),D(M[I],1,1,()=>{M[I]=null}),re(),u=M[i],u?u.p(b,_):(u=M[i]=H[i](b),u.c()),k(u,1),u.m(t,a)),b[11]&&!b[6]?g?(g.p(b,_),_[0]&2112&&k(g,1)):(g=Fe(b),g.c(),k(g,1),g.m(t,null)):g&&(oe(),D(g,1,1,()=>{g=null}),re()),(!c||_[0]&256)&&ge(t,"container",b[8])},i(b){c||(k(m),k(l.$$.fragment,b),k(T),k(u),k(g),c=!0)},o(b){D(m),D(l.$$.fragment,b),D(T),D(u),D(g),c=!1},d(b){b&&v(t),m&&m.d(),te(l),T&&T.d(),M[i].d(),g&&g.d(),h=!1,C()}}}function rn(n,t){const e=n.lastIndexOf(":",t-1);return e>=0?n.substring(e+1,t):""}const Ge=n=>[n,n],Ke=(n,t)=>[n,t],Qe=(n,t)=>[n,t];function an(n,t,e){let{speakers:l=[]}=t,{tags:o=[]}=t,{value:s=[]}=t,{value_is_output:i=!1}=t,{placeholder:u=void 0}=t,{label:a}=t,{info:c=void 0}=t,{disabled:h=!1}=t,{show_label:C=!0}=t,{container:m=!0}=t,{max_lines:T=void 0}=t,{show_copy_button:H=!1}=t,{show_submit_button:M=!0}=t,{color_map:Q=null}=t,g=!1,{server:b}=t,_=s&&typeof s!="string"?[...s]:[],q,I=!1,X=-1,V=0,W=[],S=[],G,Y=JSON.stringify(s),ce=0,ae=!1,y,w="",_e=null;const O=["red","green","blue","yellow","purple","teal","orange","cyan","lime","pink"],f={red:"rgba(254, 202, 202, 0.7)",green:"rgba(209, 250, 229, 0.7)",blue:"rgba(219, 234, 254, 0.7)",yellow:"rgba(254, 243, 199, 0.7)",purple:"rgba(233, 213, 255, 0.7)",teal:"rgba(204, 251, 241, 0.7)",orange:"rgba(254, 215, 170, 0.7)",cyan:"rgba(207, 250, 254, 0.7)",lime:"rgba(217, 249, 157, 0.7)",pink:"rgba(252, 231, 243, 0.7)"};let ne={};l.length===0&&(g=!0,s="");function we(r){const d=l.length>0?l[0]:"";if(e(14,_=[..._.slice(0,r+1),{speaker:d,text:""},..._.slice(r+1)]),typeof s!="string"){const E=s.map(R=>`${R.speaker}: ${R.text}`).join(" ");e(24,w=E)}be().then(()=>{S[r+1]&&S[r+1].focus()})}function he(r){if(e(14,_=[..._.slice(0,r),..._.slice(r+1)]),typeof s!="string"){const d=s.map(E=>`${E.speaker}: ${E.text}`).join(" ");e(24,w=d)}}function de(r,d,E){if(e(14,_[r][d]=E,_),e(14,_=[..._]),typeof E!="string"){const R=_.map(j=>`${j.speaker}: ${j.text}`).join(" ");e(24,w=R)}}function ue(r,d){const E=r.target||HTMLTextAreaElement;E&&!S[d]&&e(15,S[d]=E,S);const R=E.selectionStart||0,j=E.value;let K=!1,Z=-1;if(j[R-1]===":"){e(18,X=d),Z=R;const P=rn(j,R);e(20,W=o.filter(J=>P===""||J.toLowerCase().includes(P.toLowerCase()))),K=W.length>0,e(19,V=0)}else{const P=j.lastIndexOf(":",R-1);if(P>=0&&!j.substring(P+1,R).includes(" ")){e(18,X=d),Z=P+1;const J=j.substring(P+1,R);e(20,W=o.filter(se=>J===""||se.toLowerCase().includes(J.toLowerCase()))),K=W.length>0,e(19,V=0)}}if(K&&Z!==-1){e(17,I=!0);const P=E.getBoundingClientRect();if(q){const J=q.getBoundingClientRect();e(22,ce=J.top+P.height*(d+1.5))}}else e(17,I=!1)}async function ye(){const r=W[V];if(r){let d,E;g?(E=G,d=w):(E=S[X],d=_[X].text);const R=(E==null?void 0:E.selectionStart)||0,j=d.lastIndexOf(":",R-1);if(j>=0){const K=d.substring(0,j),Z=d.substring(R);if(g){const P=`${K}${r} ${Z}`;e(24,w=P),l.length===0?e(0,s=P):e(0,s=await b.unformat({text:P})),be().then(()=>{if(G){const J=K.length+r.length+1;G.setSelectionRange(J,J),G.focus()}})}else{const P=K.replace(/\[S\d+\]/g,"").trim(),J=`${P}${r} ${Z}`;de(X,"text",J),be().then(()=>{const se=S[X];if(se){const fe=P.length+r.length+1;se.setSelectionRange(fe,fe),se.focus()}})}}e(17,I=!1),e(19,V=0)}}async function Se(r){const d=o[r.detail.target.dataset.index];if(d){let E,R;g?(R=G,E=w):(R=S[X],E=_[X].text);const j=(R==null?void 0:R.selectionStart)||0,K=E.lastIndexOf(":",j-1);if(K>=0){const Z=E.substring(0,K),P=E.substring(j);if(g){const J=`${Z}${d} ${P}`;e(24,w=J),l.length===0?e(0,s=J):e(0,s=await b.unformat({text:J})),be().then(()=>{if(G){const se=Z.length+d.length+1;G.setSelectionRange(se,se),G.focus()}})}else{const J=Z.replace(/\[S\d+\]/g,"").trim(),se=`${J}${d} ${P}`;de(X,"text",se),be().then(()=>{const fe=S[X];if(fe){const Te=J.length+d.length+1;fe.setSelectionRange(Te,Te),fe.focus()}})}}e(17,I=!1),e(19,V=0)}}function nt(r){if(I){const d=r.target,E=document.getElementById("tag-menu");E&&!E.contains(d)&&e(17,I=!1)}}const Ee=$e();function Me(){Ee("change",s),i||Ee("input")}function st(r){if(l.length!==0&&(e(0,s=[...r]),JSON.stringify(s)!==Y)){Me(),e(38,Y=JSON.stringify(s));const d=s.map(E=>`${E.speaker}: ${E.text}`).join(" ");e(24,w=d)}}async function Oe(r){return typeof r=="string"?r:await b.format(r)}function lt(r){if(!r.trim())return[{speaker:l[0]||"",text:""}];const d=[],E=[],R=/\b(Speaker\s+\d+):\s*/g;let j;for(;(j=R.exec(r))!==null;)E.push({speaker:j[1].trim(),startIndex:j.index,endIndex:j.index+j[0].length});if(E.length===0)d.push({speaker:l[0]||"",text:r.trim()});else for(let K=0;K<E.length;K++){const Z=E[K],P=E[K+1],J=Z.endIndex,se=P?P.startIndex:r.length,fe=r.substring(J,se).trim();d.push({speaker:l.find(Te=>Te.toLowerCase()===Z.speaker.toLowerCase())||Z.speaker,text:fe})}return d}async function it(){if("clipboard"in navigator){const r=await Oe(s);await navigator.clipboard.writeText(r),Ee("copy",{value:r}),ot()}}function ot(){e(23,ae=!0),y&&clearTimeout(y),y=setTimeout(()=>{e(23,ae=!1)},1e3)}async function rt(){g&&e(0,s=await b.unformat({text:w})),Ee("submit")}Lt(async()=>{if(typeof s=="string")e(24,w=s);else if(s&&s.length>0){const r=await Oe(s);e(24,w=r)}else e(24,w="")});function at(r){g=r,e(13,g)}const ut=async r=>{r.detail.checked||e(0,s=await b.unformat({text:w}))};function ft(r,d){r[d].speaker=this.value,e(14,_),e(0,s),e(1,l),e(38,Y),e(13,g)}function ct(r,d){n.$$.not_equal(d.speaker,r)&&(d.speaker=r,e(14,_),e(0,s),e(1,l),e(38,Y),e(13,g))}const _t=(r,d)=>de(r,"speaker",d.speaker),ht=r=>h&&e(25,_e=r.speaker),dt=()=>h&&e(25,_e=null);function gt(r,d){r[d].text=this.value,e(14,_),e(0,s),e(1,l),e(38,Y),e(13,g)}const mt=(r,d)=>ue(d,r),bt=(r,d)=>ue(d,r),pt=(r,d)=>{d.key==="Escape"&&I?(e(17,I=!1),e(19,V=0),d.preventDefault()):I&&X===r&&(d.key==="ArrowDown"?(e(19,V=Math.min(V+1,W.length-1)),d.preventDefault()):d.key==="ArrowUp"?(e(19,V=Math.max(V-1,0)),d.preventDefault()):d.key==="Enter"&&(W[V]&&ye(),d.preventDefault()))};function kt(r,d){me[r?"unshift":"push"](()=>{S[d]=r,e(15,S),e(14,_),e(0,s),e(1,l),e(38,Y),e(13,g)})}const wt=r=>o.indexOf(r),vt=r=>o.indexOf(r),Et=r=>Se(r),Tt=r=>we(r),Ct=r=>he(r);function Dt(r){me[r?"unshift":"push"](()=>{q=r,e(16,q)})}function It(){w=this.value,e(24,w),e(0,s),e(14,_),e(1,l),e(38,Y),e(13,g)}const yt=r=>{ue(r,0)},St=r=>ue(r,0),Ot=r=>{r.key==="Escape"&&I?(e(17,I=!1),e(19,V=0),r.preventDefault()):I&&(r.key==="ArrowDown"?(e(19,V=Math.min(V+1,W.length-1)),r.preventDefault()):r.key==="ArrowUp"?(e(19,V=Math.max(V-1,0)),r.preventDefault()):r.key==="Enter"&&(W[V]&&ye(),r.preventDefault()))};function Bt(r){me[r?"unshift":"push"](()=>{G=r,e(21,G)})}const At=r=>o.indexOf(r),Nt=r=>o.indexOf(r),Vt=r=>Se(r);return n.$$set=r=>{"speakers"in r&&e(1,l=r.speakers),"tags"in r&&e(2,o=r.tags),"value"in r&&e(0,s=r.value),"value_is_output"in r&&e(36,i=r.value_is_output),"placeholder"in r&&e(3,u=r.placeholder),"label"in r&&e(4,a=r.label),"info"in r&&e(5,c=r.info),"disabled"in r&&e(6,h=r.disabled),"show_label"in r&&e(7,C=r.show_label),"container"in r&&e(8,m=r.container),"max_lines"in r&&e(9,T=r.max_lines),"show_copy_button"in r&&e(10,H=r.show_copy_button),"show_submit_button"in r&&e(11,M=r.show_submit_button),"color_map"in r&&e(37,Q=r.color_map),"server"in r&&e(12,b=r.server)},n.$$.update=()=>{if(n.$$.dirty[0]&2|n.$$.dirty[1]&64&&(Q?e(26,ne={...Q}):(e(26,ne={}),l.forEach((r,d)=>{const E=O[d%O.length];e(26,ne[r]=f[E],ne)}))),n.$$.dirty[0]&16387&&s&&s.length===0&&_.length===0&&l.length!==0&&(e(14,_=[{speaker:l[0],text:""}]),e(0,s=[..._]),typeof s!="string")){const r=s.map(d=>`${d.speaker}: ${d.text}`).join(" ");e(24,w=r)}n.$$.dirty[0]&8195|n.$$.dirty[1]&128&&JSON.stringify(s)!==Y&&(s==null&&e(14,_=[]),e(38,Y=JSON.stringify(s)),s&&typeof s!="string"?(e(14,_=[...s]),Oe(s).then(r=>{e(24,w=r)})):(e(24,w=s),!g&&l.length>0&&s&&e(14,_=lt(s))),Me()),n.$$.dirty[0]&49152&&(_.length>S.length?e(15,S=[...S,...Array(_.length-S.length).fill(null)]):_.length<S.length&&e(15,S=S.slice(0,_.length)),be().then(()=>{S.forEach(r=>{r&&r instanceof HTMLTextAreaElement&&(r.style.height="auto",r.style.height=r.scrollHeight+"px")})})),n.$$.dirty[0]&16384&&st(_)},[s,l,o,u,a,c,h,C,m,T,H,M,b,g,_,S,q,I,X,V,W,G,ce,ae,w,_e,ne,we,he,de,ue,ye,Se,nt,it,rt,i,Q,Y,at,ut,ft,ct,_t,ht,dt,gt,mt,bt,pt,kt,wt,vt,Et,Tt,Ct,Dt,It,yt,St,Ot,Bt,At,Nt,Vt]}class un extends Ae{constructor(t){super(),Ne(this,t,an,on,Ve,{speakers:1,tags:2,value:0,value_is_output:36,placeholder:3,label:4,info:5,disabled:6,show_label:7,container:8,max_lines:9,show_copy_button:10,show_submit_button:11,color_map:37,server:12},null,[-1,-1,-1])}}const fn=un;function We(n){let t,e;const l=[{autoscroll:n[2].autoscroll},{i18n:n[2].i18n},n[18]];let o={};for(let s=0;s<l.length;s+=1)o=Pt(o,l[s]);return t=new Ft({props:o}),t.$on("clear_status",n[21]),{c(){x(t.$$.fragment)},l(s){$(t.$$.fragment,s)},m(s,i){ee(t,s,i),e=!0},p(s,i){const u=i[0]&262148?Ut(l,[i[0]&4&&{autoscroll:s[2].autoscroll},i[0]&4&&{i18n:s[2].i18n},i[0]&262144&&jt(s[18])]):{};t.$set(u)},i(s){e||(k(t.$$.fragment,s),e=!0)},o(s){D(t.$$.fragment,s),e=!1},d(s){te(t,s)}}}function cn(n){let t,e,l,o,s,i=n[18]&&We(n);function u(h){n[22](h)}function a(h){n[23](h)}let c={label:n[4],info:n[7],show_label:n[12],max_lines:n[13],show_copy_button:n[17],container:n[14],speakers:n[5],tags:n[6],placeholder:n[8],show_submit_button:n[20],server:n[3],disabled:!n[19]};return n[0]!==void 0&&(c.value=n[0]),n[1]!==void 0&&(c.value_is_output=n[1]),e=new fn({props:c}),me.push(()=>Ce(e,"value",u)),me.push(()=>Ce(e,"value_is_output",a)),e.$on("change",n[24]),e.$on("input",n[25]),e.$on("submit",n[26]),e.$on("blur",n[27]),e.$on("select",n[28]),e.$on("focus",n[29]),e.$on("copy",n[30]),{c(){i&&i.c(),t=le(),x(e.$$.fragment)},l(h){i&&i.l(h),t=ie(h),$(e.$$.fragment,h)},m(h,C){i&&i.m(h,C),F(h,t,C),ee(e,h,C),s=!0},p(h,C){h[18]?i?(i.p(h,C),C[0]&262144&&k(i,1)):(i=We(h),i.c(),k(i,1),i.m(t.parentNode,t)):i&&(oe(),D(i,1,1,()=>{i=null}),re());const m={};C[0]&16&&(m.label=h[4]),C[0]&128&&(m.info=h[7]),C[0]&4096&&(m.show_label=h[12]),C[0]&8192&&(m.max_lines=h[13]),C[0]&131072&&(m.show_copy_button=h[17]),C[0]&16384&&(m.container=h[14]),C[0]&32&&(m.speakers=h[5]),C[0]&64&&(m.tags=h[6]),C[0]&256&&(m.placeholder=h[8]),C[0]&1048576&&(m.show_submit_button=h[20]),C[0]&8&&(m.server=h[3]),C[0]&524288&&(m.disabled=!h[19]),!l&&C[0]&1&&(l=!0,m.value=h[0],De(()=>l=!1)),!o&&C[0]&2&&(o=!0,m.value_is_output=h[1],De(()=>o=!1)),e.$set(m)},i(h){s||(k(i),k(e.$$.fragment,h),s=!0)},o(h){D(i),D(e.$$.fragment,h),s=!1},d(h){h&&v(t),i&&i.d(h),te(e,h)}}}function _n(n){let t,e;return t=new zt({props:{visible:n[11],elem_id:n[9],elem_classes:n[10],scale:n[15],min_width:n[16],allow_overflow:!0,padding:n[14],$$slots:{default:[cn]},$$scope:{ctx:n}}}),{c(){x(t.$$.fragment)},l(l){$(t.$$.fragment,l)},m(l,o){ee(t,l,o),e=!0},p(l,o){const s={};o[0]&2048&&(s.visible=l[11]),o[0]&512&&(s.elem_id=l[9]),o[0]&1024&&(s.elem_classes=l[10]),o[0]&32768&&(s.scale=l[15]),o[0]&65536&&(s.min_width=l[16]),o[0]&16384&&(s.padding=l[14]),o[0]&1995263|o[1]&1&&(s.$$scope={dirty:o,ctx:l}),t.$set(s)},i(l){e||(k(t.$$.fragment,l),e=!0)},o(l){D(t.$$.fragment,l),e=!1},d(l){te(t,l)}}}function hn(n,t,e){let{gradio:l}=t,{server:o}=t,{label:s="Dialogue"}=t,{speakers:i=[]}=t,{tags:u=[]}=t,{info:a=void 0}=t,{placeholder:c=void 0}=t,{elem_id:h=""}=t,{elem_classes:C=[]}=t,{visible:m=!0}=t,{value:T=[]}=t,{show_label:H}=t,{max_lines:M=void 0}=t,{container:Q=!0}=t,{scale:g=null}=t,{min_width:b=void 0}=t,{show_copy_button:_=!1}=t,{loading_status:q=void 0}=t,{value_is_output:I=!1}=t,{interactive:X}=t,{show_submit_button:V=!0}=t;const W=()=>l.dispatch("clear_status",q);function S(f){T=f,e(0,T)}function G(f){I=f,e(1,I)}const Y=()=>l.dispatch("change",T),ce=()=>l.dispatch("input"),ae=()=>l.dispatch("submit"),y=()=>l.dispatch("blur"),w=f=>l.dispatch("select",f.detail),_e=()=>l.dispatch("focus"),O=f=>l.dispatch("copy",f.detail);return n.$$set=f=>{"gradio"in f&&e(2,l=f.gradio),"server"in f&&e(3,o=f.server),"label"in f&&e(4,s=f.label),"speakers"in f&&e(5,i=f.speakers),"tags"in f&&e(6,u=f.tags),"info"in f&&e(7,a=f.info),"placeholder"in f&&e(8,c=f.placeholder),"elem_id"in f&&e(9,h=f.elem_id),"elem_classes"in f&&e(10,C=f.elem_classes),"visible"in f&&e(11,m=f.visible),"value"in f&&e(0,T=f.value),"show_label"in f&&e(12,H=f.show_label),"max_lines"in f&&e(13,M=f.max_lines),"container"in f&&e(14,Q=f.container),"scale"in f&&e(15,g=f.scale),"min_width"in f&&e(16,b=f.min_width),"show_copy_button"in f&&e(17,_=f.show_copy_button),"loading_status"in f&&e(18,q=f.loading_status),"value_is_output"in f&&e(1,I=f.value_is_output),"interactive"in f&&e(19,X=f.interactive),"show_submit_button"in f&&e(20,V=f.show_submit_button)},[T,I,l,o,s,i,u,a,c,h,C,m,H,M,Q,g,b,_,q,X,V,W,S,G,Y,ce,ae,y,w,_e,O]}class vn extends Ae{constructor(t){super(),Ne(this,t,hn,_n,Ve,{gradio:2,server:3,label:4,speakers:5,tags:6,info:7,placeholder:8,elem_id:9,elem_classes:10,visible:11,value:0,show_label:12,max_lines:13,container:14,scale:15,min_width:16,show_copy_button:17,loading_status:18,value_is_output:1,interactive:19,show_submit_button:20},null,[-1,-1])}get gradio(){return this.$$.ctx[2]}set gradio(t){this.$$set({gradio:t}),U()}get server(){return this.$$.ctx[3]}set server(t){this.$$set({server:t}),U()}get label(){return this.$$.ctx[4]}set label(t){this.$$set({label:t}),U()}get speakers(){return this.$$.ctx[5]}set speakers(t){this.$$set({speakers:t}),U()}get tags(){return this.$$.ctx[6]}set tags(t){this.$$set({tags:t}),U()}get info(){return this.$$.ctx[7]}set info(t){this.$$set({info:t}),U()}get placeholder(){return this.$$.ctx[8]}set placeholder(t){this.$$set({placeholder:t}),U()}get elem_id(){return this.$$.ctx[9]}set elem_id(t){this.$$set({elem_id:t}),U()}get elem_classes(){return this.$$.ctx[10]}set elem_classes(t){this.$$set({elem_classes:t}),U()}get visible(){return this.$$.ctx[11]}set visible(t){this.$$set({visible:t}),U()}get value(){return this.$$.ctx[0]}set value(t){this.$$set({value:t}),U()}get show_label(){return this.$$.ctx[12]}set show_label(t){this.$$set({show_label:t}),U()}get max_lines(){return this.$$.ctx[13]}set max_lines(t){this.$$set({max_lines:t}),U()}get container(){return this.$$.ctx[14]}set container(t){this.$$set({container:t}),U()}get scale(){return this.$$.ctx[15]}set scale(t){this.$$set({scale:t}),U()}get min_width(){return this.$$.ctx[16]}set min_width(t){this.$$set({min_width:t}),U()}get show_copy_button(){return this.$$.ctx[17]}set show_copy_button(t){this.$$set({show_copy_button:t}),U()}get loading_status(){return this.$$.ctx[18]}set loading_status(t){this.$$set({loading_status:t}),U()}get value_is_output(){return this.$$.ctx[1]}set value_is_output(t){this.$$set({value_is_output:t}),U()}get interactive(){return this.$$.ctx[19]}set interactive(t){this.$$set({interactive:t}),U()}get show_submit_button(){return this.$$.ctx[20]}set show_submit_button(t){this.$$set({show_submit_button:t}),U()}}export{fn as BaseDialogue,Cn as BaseExample,vn as default};
//# sourceMappingURL=Index.B2SJRDpQ.js.map
