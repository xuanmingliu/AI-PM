/* empty css                                                        */import{B as Rt}from"./BlockTitle-CbYIyvZV.js";import"./MarkdownCode.svelte_svelte_type_style_lang-DEkfERZI.js";import{C as jt}from"./Check-CEkiXcyC.js";import{C as qt}from"./Copy-CxQ9EyK2.js";import{P as Jt}from"./Plus-BuAWg7aq.js";import{S as Ht}from"./Send-DyoOovnk.js";import{T as zt}from"./Trash-RbZEwH-j.js";import"./index-C1MLra31.js";import{f as be}from"./index-Lv-EPzbm.js";import{D as et,c as Ut}from"./Dropdown-Bm5TP_k5.js";import"./StreamingBar.svelte_svelte_type_style_lang-DyfAPhwM.js";/* empty css                                              */import{B as Ft}from"./Block-BPual4nE.js";import{S as Gt}from"./index-Cdg2LH6_.js";import{default as hs}from"./Example-DxdiEFS_.js";import"./Info-CKG-PStk.js";import"./MarkdownCode-DF-ZVGvG.js";import"./prism-python-Dl7Tytau.js";import"./svelte/svelte.js";import"./DropdownArrow-B7DUstP0.js";import"./IconButton-BYr8xyoS.js";import"./Clear-By3xiIwg.js";const{SvelteComponent:Kt,append:Ce,attr:de,detach:Qt,element:Te,flush:Oe,init:Vt,insert:Wt,listen:Xt,noop:Re,safe_not_equal:Yt,set_data:Zt,set_style:xt,space:$t,text:en}=window.__gradio__svelte__internal,{createEventDispatcher:tn}=window.__gradio__svelte__internal;function nn(n){let e,t,l,o,s,r,u;return{c(){e=Te("div"),t=Te("button"),l=$t(),o=Te("span"),s=en(n[1]),de(t,"role","switch"),de(t,"aria-checked",n[0]),t.disabled=n[2],de(t,"class","svelte-1wr5wa"),de(e,"class","s s--slider svelte-1wr5wa"),xt(e,"font-size","var(--font-size-sm)px")},m(a,_){Wt(a,e,_),Ce(e,t),Ce(e,l),Ce(e,o),Ce(o,s),r||(u=Xt(t,"click",n[3]),r=!0)},p(a,[_]){_&1&&de(t,"aria-checked",a[0]),_&4&&(t.disabled=a[2]),_&2&&Zt(s,a[1])},i:Re,o:Re,d(a){a&&Qt(e),r=!1,u()}}}function sn(n,e,t){let{label:l}=e,{checked:o=!1}=e,{disabled:s=!1}=e;const r=tn();function u(a){const h=a.target.getAttribute("aria-checked");t(0,o=h!=="true"),r("click",{checked:o})}return n.$$set=a=>{"label"in a&&t(1,l=a.label),"checked"in a&&t(0,o=a.checked),"disabled"in a&&t(2,s=a.disabled)},[o,l,s,u]}class ln extends Kt{constructor(e){super(),Vt(this,e,sn,nn,Yt,{label:1,checked:0,disabled:2})}get label(){return this.$$.ctx[1]}set label(e){this.$$set({label:e}),Oe()}get checked(){return this.$$.ctx[0]}set checked(e){this.$$set({checked:e}),Oe()}get disabled(){return this.$$.ctx[2]}set disabled(e){this.$$set({disabled:e}),Oe()}}const{SvelteComponent:on,add_flush_callback:tt,add_render_callback:Ee,append:j,attr:k,bind:nt,binding_callbacks:ge,check_outros:$,create_bidirectional_transition:ve,create_component:te,create_in_transition:rn,destroy_component:ne,destroy_each:un,detach:W,element:N,empty:an,ensure_array_like:je,flush:G,group_outros:ee,init:fn,insert:X,listen:z,mount_component:se,noop:Se,run_all:st,safe_not_equal:cn,set_data:_n,set_input_value:_e,set_style:qe,space:x,text:hn,toggle_class:ae,transition_in:C,transition_out:D}=window.__gradio__svelte__internal,{createEventDispatcher:dn,tick:fe,onMount:gn}=window.__gradio__svelte__internal;function Je(n,e,t){const l=n.slice();return l[74]=e[t],l[75]=e,l[76]=t,l}function He(n){let e,t,l,o;const s=[bn,mn],r=[];function u(a,_){return a[23]?0:1}return e=u(n),t=r[e]=s[e](n),{c(){t.c(),l=an()},m(a,_){r[e].m(a,_),X(a,l,_),o=!0},p(a,_){let h=e;e=u(a),e===h?r[e].p(a,_):(ee(),D(r[h],1,1,()=>{r[h]=null}),$(),t=r[e],t?t.p(a,_):(t=r[e]=s[e](a),t.c()),C(t,1),t.m(l.parentNode,l))},i(a){o||(C(t),o=!0)},o(a){D(t),o=!1},d(a){a&&W(l),r[e].d(a)}}}function mn(n){let e,t,l,o,s;return t=new qt({}),{c(){e=N("button"),te(t.$$.fragment),k(e,"class","copy-button svelte-1fonppu"),k(e,"aria-label","Copy"),k(e,"aria-roledescription","Copy text")},m(r,u){X(r,e,u),se(t,e,null),l=!0,o||(s=z(e,"click",n[34]),o=!0)},p:Se,i(r){l||(C(t.$$.fragment,r),l=!0)},o(r){D(t.$$.fragment,r),l=!1},d(r){r&&W(e),ne(t),o=!1,s()}}}function bn(n){let e,t,l,o;return t=new jt({}),{c(){e=N("button"),te(t.$$.fragment),k(e,"class","copy-button svelte-1fonppu"),k(e,"aria-label","Copied"),k(e,"aria-roledescription","Text copied")},m(s,r){X(s,e,r),se(t,e,null),o=!0},p:Se,i(s){o||(C(t.$$.fragment,s),s&&(l||Ee(()=>{l=rn(e,be,{duration:300}),l.start()})),o=!0)},o(s){D(t.$$.fragment,s),o=!1},d(s){s&&W(e),ne(t)}}}function pn(n){let e;return{c(){e=hn(n[4])},m(t,l){X(t,e,l)},p(t,l){l[0]&16&&_n(e,t[4])},d(t){t&&W(e)}}}function ze(n){let e,t,l,o;function s(u){n[39](u)}let r={label:"Plain Text"};return n[13]!==void 0&&(r.checked=n[13]),t=new ln({props:r}),ge.push(()=>nt(t,"checked",s)),t.$on("click",n[40]),{c(){e=N("div"),te(t.$$.fragment),k(e,"class","switch-container top-switch svelte-1fonppu")},m(u,a){X(u,e,a),se(t,e,null),o=!0},p(u,a){const _={};!l&&a[0]&8192&&(l=!0,_.checked=u[13],tt(()=>l=!1)),t.$set(_)},i(u){o||(C(t.$$.fragment,u),o=!0)},o(u){D(t.$$.fragment,u),o=!1},d(u){u&&W(e),ne(t)}}}function kn(n){let e,t,l,o,s,r,u=n[17]&&Ue(n);return{c(){e=N("div"),t=N("textarea"),l=x(),u&&u.c(),k(t,"data-testid","textbox"),k(t,"placeholder",n[3]),k(t,"rows",5),t.disabled=n[6],k(t,"class","svelte-1fonppu"),k(e,"class","textarea-container")},m(a,_){X(a,e,_),j(e,t),_e(t,n[24]),n[61](t),j(e,l),u&&u.m(e,null),o=!0,s||(r=[z(t,"input",n[57]),z(t,"input",n[58]),z(t,"focus",n[59]),z(t,"keydown",n[60])],s=!0)},p(a,_){(!o||_[0]&8)&&k(t,"placeholder",a[3]),(!o||_[0]&64)&&(t.disabled=a[6]),_[0]&16777216&&_e(t,a[24]),a[17]?u?(u.p(a,_),_[0]&131072&&C(u,1)):(u=Ue(a),u.c(),C(u,1),u.m(e,null)):u&&(ee(),D(u,1,1,()=>{u=null}),$())},i(a){o||(C(u),o=!0)},o(a){D(u),o=!1},d(a){a&&W(e),n[61](null),u&&u.d(),s=!1,st(r)}}}function wn(n){let e,t,l=je(n[14]),o=[];for(let r=0;r<l.length;r+=1)o[r]=Ke(Je(n,l,r));const s=r=>D(o[r],1,1,()=>{o[r]=null});return{c(){e=N("div");for(let r=0;r<o.length;r+=1)o[r].c();k(e,"class","dialogue-container svelte-1fonppu")},m(r,u){X(r,e,u);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(e,null);n[56](e),t=!0},p(r,u){if(u[0]&2120139342|u[1]&3){l=je(r[14]);let a;for(a=0;a<l.length;a+=1){const _=Je(r,l,a);o[a]?(o[a].p(_,u),C(o[a],1)):(o[a]=Ke(_),o[a].c(),C(o[a],1),o[a].m(e,null))}for(ee(),a=l.length;a<o.length;a+=1)s(a);$()}},i(r){if(!t){for(let u=0;u<l.length;u+=1)C(o[u]);t=!0}},o(r){o=o.filter(Boolean);for(let u=0;u<o.length;u+=1)D(o[u]);t=!1},d(r){r&&W(e),un(o,r),n[56](null)}}}function Ue(n){let e,t,l,o;return t=new et({props:{choices:n[2].map(Xe),filtered_indices:n[20].map(n[62]),active_index:n[20].map(n[63])[n[19]],show_options:!0}}),t.$on("change",n[64]),{c(){e=N("div"),te(t.$$.fragment),k(e,"id","tag-menu"),k(e,"class","tag-menu-plain-text svelte-1fonppu")},m(s,r){X(s,e,r),se(t,e,null),o=!0},p(s,r){const u={};r[0]&4&&(u.choices=s[2].map(Xe)),r[0]&1048580&&(u.filtered_indices=s[20].map(s[62])),r[0]&1572868&&(u.active_index=s[20].map(s[63])[s[19]]),t.$set(u)},i(s){o||(C(t.$$.fragment,s),s&&Ee(()=>{o&&(l||(l=ve(e,be,{duration:100},!0)),l.run(1))}),o=!0)},o(s){D(t.$$.fragment,s),s&&(l||(l=ve(e,be,{duration:100},!1)),l.run(0)),o=!1},d(s){s&&W(e),ne(t),s&&l&&l.end()}}}function Cn(n){let e,t,l;function o(u){n[42](u,n[74])}function s(){return n[43](n[76],n[74])}let r={choices:n[1].map(Ve),show_label:!1,container:!0,label:""};return n[74].speaker!==void 0&&(r.value=n[74].speaker),e=new Ut({props:r}),ge.push(()=>nt(e,"value",o)),e.$on("change",s),{c(){te(e.$$.fragment)},m(u,a){se(e,u,a),l=!0},p(u,a){n=u;const _={};a[0]&2&&(_.choices=n[1].map(Ve)),!t&&a[0]&16384&&(t=!0,_.value=n[74].speaker,tt(()=>t=!1)),e.$set(_)},i(u){l||(C(e.$$.fragment,u),l=!0)},o(u){D(e.$$.fragment,u),l=!1},d(u){ne(e,u)}}}function vn(n){let e,t,l;function o(){n[41].call(e,n[75],n[76])}return{c(){e=N("textarea"),e.disabled=n[6],k(e,"rows","1"),e.readOnly=!0,k(e,"class","svelte-1fonppu")},m(s,r){X(s,e,r),_e(e,n[74].speaker),t||(l=z(e,"input",o),t=!0)},p(s,r){n=s,r[0]&64&&(e.disabled=n[6]),r[0]&16384&&_e(e,n[74].speaker)},i:Se,o:Se,d(s){s&&W(e),t=!1,l()}}}function Fe(n){let e,t,l,o;return t=new et({props:{choices:n[2].map(We),filtered_indices:n[20].map(n[51]),active_index:n[20].map(n[52])[n[19]],show_options:!0,offset_from_top:n[22],from_top:!0}}),t.$on("change",n[53]),{c(){e=N("div"),te(t.$$.fragment),k(e,"id","tag-menu"),k(e,"class","tag-menu svelte-1fonppu")},m(s,r){X(s,e,r),se(t,e,null),o=!0},p(s,r){const u={};r[0]&4&&(u.choices=s[2].map(We)),r[0]&1048580&&(u.filtered_indices=s[20].map(s[51])),r[0]&1572868&&(u.active_index=s[20].map(s[52])[s[19]]),r[0]&4194304&&(u.offset_from_top=s[22]),t.$set(u)},i(s){o||(C(t.$$.fragment,s),s&&Ee(()=>{o&&(l||(l=ve(e,be,{duration:100},!0)),l.run(1))}),o=!0)},o(s){D(t.$$.fragment,s),s&&(l||(l=ve(e,be,{duration:100},!1)),l.run(0)),o=!1},d(s){s&&W(e),ne(t),s&&l&&l.end()}}}function Ge(n){let e,t,l,o,s,r;l=new Jt({});function u(){return n[54](n[76])}return{c(){e=N("div"),t=N("button"),te(l.$$.fragment),k(t,"class","add-button svelte-1fonppu"),k(t,"aria-label","Add new line"),t.disabled=n[6],k(e,"class","svelte-1fonppu"),ae(e,"action-column",n[76]==0),ae(e,"hidden",n[6])},m(a,_){X(a,e,_),j(e,t),se(l,t,null),o=!0,s||(r=z(t,"click",u),s=!0)},p(a,_){n=a,(!o||_[0]&64)&&(t.disabled=n[6]),(!o||_[0]&64)&&ae(e,"hidden",n[6])},i(a){o||(C(l.$$.fragment,a),o=!0)},o(a){D(l.$$.fragment,a),o=!1},d(a){a&&W(e),ne(l),s=!1,r()}}}function Ke(n){let e,t,l,o,s,r,u,a,_=n[76],h,S,m,v,J,M,Y,g,b,d;const H=[vn,Cn],y=[];function q(E,f){return E[6]?0:1}l=q(n),o=y[l]=H[l](n);function O(){return n[44](n[74])}function K(){n[46].call(a,n[75],n[76])}function I(...E){return n[47](n[76],...E)}function U(...E){return n[48](n[76],...E)}function Q(...E){return n[49](n[76],...E)}const re=()=>n[50](a,_),ie=()=>n[50](null,_);let T=n[17]&&n[18]===n[76]&&Fe(n),p=(n[9]==null||n[9]&&n[76]<n[9]-1)&&Ge(n);M=new zt({});function ue(){return n[55](n[76])}return{c(){e=N("div"),t=N("div"),o.c(),s=x(),r=N("div"),u=N("div"),a=N("textarea"),h=x(),T&&T.c(),S=x(),p&&p.c(),m=x(),v=N("div"),J=N("button"),te(M.$$.fragment),Y=x(),k(t,"class","speaker-column svelte-1fonppu"),k(t,"role","button"),k(t,"tabindex","0"),k(a,"placeholder",n[3]),a.disabled=n[6],k(a,"rows","1"),k(a,"class","svelte-1fonppu"),k(u,"class","input-container svelte-1fonppu"),k(r,"class","text-column svelte-1fonppu"),k(J,"class","delete-button svelte-1fonppu"),k(J,"aria-label","Remove current line"),J.disabled=n[6],k(v,"class","action-column svelte-1fonppu"),ae(v,"hidden",n[6]||n[76]==0),k(e,"class","dialogue-line svelte-1fonppu"),qe(e,"--speaker-bg-color",n[6]&&(n[25]===null||n[25]===n[74].speaker)&&n[26][n[74].speaker]||"transparent")},m(E,f){X(E,e,f),j(e,t),y[l].m(t,null),j(e,s),j(e,r),j(r,u),j(u,a),_e(a,n[74].text),re(),j(u,h),T&&T.m(u,null),j(e,S),p&&p.m(e,null),j(e,m),j(e,v),j(v,J),se(M,J,null),j(e,Y),g=!0,b||(d=[z(t,"mouseenter",O),z(t,"mouseleave",n[45]),z(a,"input",K),z(a,"input",I),z(a,"focus",U),z(a,"keydown",Q),z(J,"click",ue)],b=!0)},p(E,f){n=E;let le=l;l=q(n),l===le?y[l].p(n,f):(ee(),D(y[le],1,1,()=>{y[le]=null}),$(),o=y[l],o?o.p(n,f):(o=y[l]=H[l](n),o.c()),C(o,1),o.m(t,null)),(!g||f[0]&8)&&k(a,"placeholder",n[3]),(!g||f[0]&64)&&(a.disabled=n[6]),f[0]&16384&&_e(a,n[74].text),_!==n[76]&&(ie(),_=n[76],re()),n[17]&&n[18]===n[76]?T?(T.p(n,f),f[0]&393216&&C(T,1)):(T=Fe(n),T.c(),C(T,1),T.m(u,null)):T&&(ee(),D(T,1,1,()=>{T=null}),$()),n[9]==null||n[9]&&n[76]<n[9]-1?p?(p.p(n,f),f[0]&512&&C(p,1)):(p=Ge(n),p.c(),C(p,1),p.m(e,m)):p&&(ee(),D(p,1,1,()=>{p=null}),$()),(!g||f[0]&64)&&(J.disabled=n[6]),(!g||f[0]&64)&&ae(v,"hidden",n[6]||n[76]==0),(!g||f[0]&100679744)&&qe(e,"--speaker-bg-color",n[6]&&(n[25]===null||n[25]===n[74].speaker)&&n[26][n[74].speaker]||"transparent")},i(E){g||(C(o),C(T),C(p),C(M.$$.fragment,E),g=!0)},o(E){D(o),D(T),D(p),D(M.$$.fragment,E),g=!1},d(E){E&&W(e),y[l].d(),ie(),T&&T.d(),p&&p.d(),ne(M),b=!1,st(d)}}}function Qe(n){let e,t,l,o,s,r;return l=new Ht({}),{c(){e=N("div"),t=N("button"),te(l.$$.fragment),k(t,"class","submit-button svelte-1fonppu"),t.disabled=n[6],k(e,"class","submit-container svelte-1fonppu")},m(u,a){X(u,e,a),j(e,t),se(l,t,null),o=!0,s||(r=z(t,"click",n[35]),s=!0)},p(u,a){(!o||a[0]&64)&&(t.disabled=u[6])},i(u){o||(C(l.$$.fragment,u),o=!0)},o(u){D(l.$$.fragment,u),o=!1},d(u){u&&W(e),ne(l),s=!1,r()}}}function Sn(n){let e,t,l,o,s,r,u,a,_,h,S,m=n[7]&&n[10]&&He(n);l=new Rt({props:{show_label:n[7],info:n[5],$$slots:{default:[pn]},$$scope:{ctx:n}}});let v=n[1].length!==0&&ze(n);const J=[wn,kn],M=[];function Y(b,d){return b[13]?1:0}r=Y(n),u=M[r]=J[r](n);let g=n[11]&&!n[6]&&Qe(n);return{c(){e=N("label"),m&&m.c(),t=x(),te(l.$$.fragment),o=x(),v&&v.c(),s=x(),u.c(),a=x(),g&&g.c(),k(e,"class","svelte-1fonppu"),ae(e,"container",n[8])},m(b,d){X(b,e,d),m&&m.m(e,null),j(e,t),se(l,e,null),j(e,o),v&&v.m(e,null),j(e,s),M[r].m(e,null),j(e,a),g&&g.m(e,null),_=!0,h||(S=z(window,"click",n[33]),h=!0)},p(b,d){b[7]&&b[10]?m?(m.p(b,d),d[0]&1152&&C(m,1)):(m=He(b),m.c(),C(m,1),m.m(e,t)):m&&(ee(),D(m,1,1,()=>{m=null}),$());const H={};d[0]&128&&(H.show_label=b[7]),d[0]&32&&(H.info=b[5]),d[0]&16|d[2]&32768&&(H.$$scope={dirty:d,ctx:b}),l.$set(H),b[1].length!==0?v?(v.p(b,d),d[0]&2&&C(v,1)):(v=ze(b),v.c(),C(v,1),v.m(e,s)):v&&(ee(),D(v,1,1,()=>{v=null}),$());let y=r;r=Y(b),r===y?M[r].p(b,d):(ee(),D(M[y],1,1,()=>{M[y]=null}),$(),u=M[r],u?u.p(b,d):(u=M[r]=J[r](b),u.c()),C(u,1),u.m(e,a)),b[11]&&!b[6]?g?(g.p(b,d),d[0]&2112&&C(g,1)):(g=Qe(b),g.c(),C(g,1),g.m(e,null)):g&&(ee(),D(g,1,1,()=>{g=null}),$()),(!_||d[0]&256)&&ae(e,"container",b[8])},i(b){_||(C(m),C(l.$$.fragment,b),C(v),C(u),C(g),_=!0)},o(b){D(m),D(l.$$.fragment,b),D(v),D(u),D(g),_=!1},d(b){b&&W(e),m&&m.d(),ne(l),v&&v.d(),M[r].d(),g&&g.d(),h=!1,S()}}}function yn(n,e){const t=n.lastIndexOf(":",e-1);return t>=0?n.substring(t+1,e):""}const Ve=n=>[n,n],We=(n,e)=>[n,e],Xe=(n,e)=>[n,e];function Dn(n,e,t){let{speakers:l=[]}=e,{tags:o=[]}=e,{value:s=[]}=e,{value_is_output:r=!1}=e,{placeholder:u=void 0}=e,{label:a}=e,{info:_=void 0}=e,{disabled:h=!1}=e,{show_label:S=!0}=e,{container:m=!0}=e,{max_lines:v=void 0}=e,{show_copy_button:J=!1}=e,{show_submit_button:M=!0}=e,{color_map:Y=null}=e,g=!1,{server:b}=e,d=s&&typeof s!="string"?[...s]:[],H,y=!1,q=-1,O=0,K=[],I=[],U,Q=JSON.stringify(s),re=0,ie=!1,T,p="",ue=null;const E=["red","green","blue","yellow","purple","teal","orange","cyan","lime","pink"],f={red:"rgba(254, 202, 202, 0.7)",green:"rgba(209, 250, 229, 0.7)",blue:"rgba(219, 234, 254, 0.7)",yellow:"rgba(254, 243, 199, 0.7)",purple:"rgba(233, 213, 255, 0.7)",teal:"rgba(204, 251, 241, 0.7)",orange:"rgba(254, 215, 170, 0.7)",cyan:"rgba(207, 250, 254, 0.7)",lime:"rgba(217, 249, 157, 0.7)",pink:"rgba(252, 231, 243, 0.7)"};let le={};l.length===0&&(g=!0,s="");function Ne(i){const c=l.length>0?l[0]:"";if(t(14,d=[...d.slice(0,i+1),{speaker:c,text:""},...d.slice(i+1)]),typeof s!="string"){const w=s.map(A=>`${A.speaker}: ${A.text}`).join(" ");t(24,p=w)}fe().then(()=>{I[i+1]&&I[i+1].focus()})}function Ae(i){if(t(14,d=[...d.slice(0,i),...d.slice(i+1)]),typeof s!="string"){const c=s.map(w=>`${w.speaker}: ${w.text}`).join(" ");t(24,p=c)}}function pe(i,c,w){if(t(14,d[i][c]=w,d),t(14,d=[...d]),typeof w!="string"){const A=d.map(P=>`${P.speaker}: ${P.text}`).join(" ");t(24,p=A)}}function he(i,c){const w=i.target||HTMLTextAreaElement;w&&!I[c]&&t(15,I[c]=w,I);const A=w.selectionStart||0,P=w.value;let F=!1,V=-1;if(P[A-1]===":"){t(18,q=c),V=A;const B=yn(P,A);t(20,K=o.filter(R=>B===""||R.toLowerCase().includes(B.toLowerCase()))),F=K.length>0,t(19,O=0)}else{const B=P.lastIndexOf(":",A-1);if(B>=0&&!P.substring(B+1,A).includes(" ")){t(18,q=c),V=B+1;const R=P.substring(B+1,A);t(20,K=o.filter(Z=>R===""||Z.toLowerCase().includes(R.toLowerCase()))),F=K.length>0,t(19,O=0)}}if(F&&V!==-1){t(17,y=!0);const B=w.getBoundingClientRect();if(H){const R=H.getBoundingClientRect();t(22,re=R.top+B.height*(c+1.5))}}else t(17,y=!1)}async function ye(){const i=K[O];if(i){let c,w;g?(w=U,c=p):(w=I[q],c=d[q].text);const A=w?.selectionStart||0,P=c.lastIndexOf(":",A-1);if(P>=0){const F=c.substring(0,P),V=c.substring(A);if(g){const B=`${F}${i} ${V}`;t(24,p=B),l.length===0?t(0,s=B):t(0,s=await b.unformat({text:B})),fe().then(()=>{if(U){const R=F.length+i.length+1;U.setSelectionRange(R,R),U.focus()}})}else{const B=F.replace(/\[S\d+\]/g,"").trim(),R=`${B}${i} ${V}`;pe(q,"text",R),fe().then(()=>{const Z=I[q];if(Z){const oe=B.length+i.length+1;Z.setSelectionRange(oe,oe),Z.focus()}})}}t(17,y=!1),t(19,O=0)}}async function De(i){const c=o[i.detail.target.dataset.index];if(c){let w,A;g?(A=U,w=p):(A=I[q],w=d[q].text);const P=A?.selectionStart||0,F=w.lastIndexOf(":",P-1);if(F>=0){const V=w.substring(0,F),B=w.substring(P);if(g){const R=`${V}${c} ${B}`;t(24,p=R),l.length===0?t(0,s=R):t(0,s=await b.unformat({text:R})),fe().then(()=>{if(U){const Z=V.length+c.length+1;U.setSelectionRange(Z,Z),U.focus()}})}else{const R=V.replace(/\[S\d+\]/g,"").trim(),Z=`${R}${c} ${B}`;pe(q,"text",Z),fe().then(()=>{const oe=I[q];if(oe){const we=R.length+c.length+1;oe.setSelectionRange(we,we),oe.focus()}})}}t(17,y=!1),t(19,O=0)}}function lt(i){if(y){const c=i.target,w=document.getElementById("tag-menu");w&&!w.contains(c)&&t(17,y=!1)}}const ke=dn();function Pe(){ke("change",s),r||ke("input")}function it(i){if(l.length!==0&&(t(0,s=[...i]),JSON.stringify(s)!==Q)){Pe(),t(38,Q=JSON.stringify(s));const c=s.map(w=>`${w.speaker}: ${w.text}`).join(" ");t(24,p=c)}}async function Ie(i){return typeof i=="string"?i:await b.format(i)}function ot(i){if(!i.trim())return[{speaker:l[0]||"",text:""}];const c=[],w=[],A=/\b(Speaker\s+\d+):\s*/g;let P;for(;(P=A.exec(i))!==null;)w.push({speaker:P[1].trim(),startIndex:P.index,endIndex:P.index+P[0].length});if(w.length===0)c.push({speaker:l[0]||"",text:i.trim()});else for(let F=0;F<w.length;F++){const V=w[F],B=w[F+1],R=V.endIndex,Z=B?B.startIndex:i.length,oe=i.substring(R,Z).trim();c.push({speaker:l.find(we=>we.toLowerCase()===V.speaker.toLowerCase())||V.speaker,text:oe})}return c}async function rt(){if("clipboard"in navigator){const i=await Ie(s);await navigator.clipboard.writeText(i),ke("copy",{value:i}),ut()}}function ut(){t(23,ie=!0),T&&clearTimeout(T),T=setTimeout(()=>{t(23,ie=!1)},1e3)}async function at(){g&&t(0,s=await b.unformat({text:p})),ke("submit")}gn(async()=>{if(typeof s=="string")t(24,p=s);else if(s&&s.length>0){const i=await Ie(s);t(24,p=i)}else t(24,p="")});function ft(i){g=i,t(13,g)}const ct=async i=>{i.detail.checked||t(0,s=await b.unformat({text:p}))};function _t(i,c){i[c].speaker=this.value,t(14,d),t(0,s),t(1,l),t(38,Q),t(13,g)}function ht(i,c){n.$$.not_equal(c.speaker,i)&&(c.speaker=i,t(14,d),t(0,s),t(1,l),t(38,Q),t(13,g))}const dt=(i,c)=>pe(i,"speaker",c.speaker),gt=i=>h&&t(25,ue=i.speaker),mt=()=>h&&t(25,ue=null);function bt(i,c){i[c].text=this.value,t(14,d),t(0,s),t(1,l),t(38,Q),t(13,g)}const pt=(i,c)=>he(c,i),kt=(i,c)=>he(c,i),wt=(i,c)=>{c.key==="Escape"&&y?(t(17,y=!1),t(19,O=0),c.preventDefault()):y&&q===i&&(c.key==="ArrowDown"?(t(19,O=Math.min(O+1,K.length-1)),c.preventDefault()):c.key==="ArrowUp"?(t(19,O=Math.max(O-1,0)),c.preventDefault()):c.key==="Enter"&&(K[O]&&ye(),c.preventDefault()))};function Ct(i,c){ge[i?"unshift":"push"](()=>{I[c]=i,t(15,I),t(14,d),t(0,s),t(1,l),t(38,Q),t(13,g)})}const vt=i=>o.indexOf(i),St=i=>o.indexOf(i),yt=i=>De(i),Dt=i=>Ne(i),It=i=>Ae(i);function Tt(i){ge[i?"unshift":"push"](()=>{H=i,t(16,H)})}function Ot(){p=this.value,t(24,p),t(0,s),t(14,d),t(1,l),t(38,Q),t(13,g)}const Et=i=>{he(i,0)},Bt=i=>he(i,0),Mt=i=>{i.key==="Escape"&&y?(t(17,y=!1),t(19,O=0),i.preventDefault()):y&&(i.key==="ArrowDown"?(t(19,O=Math.min(O+1,K.length-1)),i.preventDefault()):i.key==="ArrowUp"?(t(19,O=Math.max(O-1,0)),i.preventDefault()):i.key==="Enter"&&(K[O]&&ye(),i.preventDefault()))};function Lt(i){ge[i?"unshift":"push"](()=>{U=i,t(21,U)})}const Nt=i=>o.indexOf(i),At=i=>o.indexOf(i),Pt=i=>De(i);return n.$$set=i=>{"speakers"in i&&t(1,l=i.speakers),"tags"in i&&t(2,o=i.tags),"value"in i&&t(0,s=i.value),"value_is_output"in i&&t(36,r=i.value_is_output),"placeholder"in i&&t(3,u=i.placeholder),"label"in i&&t(4,a=i.label),"info"in i&&t(5,_=i.info),"disabled"in i&&t(6,h=i.disabled),"show_label"in i&&t(7,S=i.show_label),"container"in i&&t(8,m=i.container),"max_lines"in i&&t(9,v=i.max_lines),"show_copy_button"in i&&t(10,J=i.show_copy_button),"show_submit_button"in i&&t(11,M=i.show_submit_button),"color_map"in i&&t(37,Y=i.color_map),"server"in i&&t(12,b=i.server)},n.$$.update=()=>{if(n.$$.dirty[0]&2|n.$$.dirty[1]&64&&(Y?t(26,le={...Y}):(t(26,le={}),l.forEach((i,c)=>{const w=E[c%E.length];t(26,le[i]=f[w],le)}))),n.$$.dirty[0]&16387&&s&&s.length===0&&d.length===0&&l.length!==0&&(t(14,d=[{speaker:l[0],text:""}]),t(0,s=[...d]),typeof s!="string")){const i=s.map(c=>`${c.speaker}: ${c.text}`).join(" ");t(24,p=i)}n.$$.dirty[0]&8195|n.$$.dirty[1]&128&&JSON.stringify(s)!==Q&&(s==null&&t(14,d=[]),t(38,Q=JSON.stringify(s)),s&&typeof s!="string"?(t(14,d=[...s]),Ie(s).then(i=>{t(24,p=i)})):(t(24,p=s),!g&&l.length>0&&s&&t(14,d=ot(s))),Pe()),n.$$.dirty[0]&49152&&(d.length>I.length?t(15,I=[...I,...Array(d.length-I.length).fill(null)]):d.length<I.length&&t(15,I=I.slice(0,d.length)),fe().then(()=>{I.forEach(i=>{i&&i instanceof HTMLTextAreaElement&&(i.style.height="auto",i.style.height=i.scrollHeight+"px")})})),n.$$.dirty[0]&16384&&it(d)},[s,l,o,u,a,_,h,S,m,v,J,M,b,g,d,I,H,y,q,O,K,U,re,ie,p,ue,le,Ne,Ae,pe,he,ye,De,lt,rt,at,r,Y,Q,ft,ct,_t,ht,dt,gt,mt,bt,pt,kt,wt,Ct,vt,St,yt,Dt,It,Tt,Ot,Et,Bt,Mt,Lt,Nt,At,Pt]}class In extends on{constructor(e){super(),fn(this,e,Dn,Sn,cn,{speakers:1,tags:2,value:0,value_is_output:36,placeholder:3,label:4,info:5,disabled:6,show_label:7,container:8,max_lines:9,show_copy_button:10,show_submit_button:11,color_map:37,server:12},null,[-1,-1,-1])}get speakers(){return this.$$.ctx[1]}set speakers(e){this.$$set({speakers:e}),G()}get tags(){return this.$$.ctx[2]}set tags(e){this.$$set({tags:e}),G()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),G()}get value_is_output(){return this.$$.ctx[36]}set value_is_output(e){this.$$set({value_is_output:e}),G()}get placeholder(){return this.$$.ctx[3]}set placeholder(e){this.$$set({placeholder:e}),G()}get label(){return this.$$.ctx[4]}set label(e){this.$$set({label:e}),G()}get info(){return this.$$.ctx[5]}set info(e){this.$$set({info:e}),G()}get disabled(){return this.$$.ctx[6]}set disabled(e){this.$$set({disabled:e}),G()}get show_label(){return this.$$.ctx[7]}set show_label(e){this.$$set({show_label:e}),G()}get container(){return this.$$.ctx[8]}set container(e){this.$$set({container:e}),G()}get max_lines(){return this.$$.ctx[9]}set max_lines(e){this.$$set({max_lines:e}),G()}get show_copy_button(){return this.$$.ctx[10]}set show_copy_button(e){this.$$set({show_copy_button:e}),G()}get show_submit_button(){return this.$$.ctx[11]}set show_submit_button(e){this.$$set({show_submit_button:e}),G()}get color_map(){return this.$$.ctx[37]}set color_map(e){this.$$set({color_map:e}),G()}get server(){return this.$$.ctx[12]}set server(e){this.$$set({server:e}),G()}}const Tn=In,{SvelteComponent:On,add_flush_callback:Ye,assign:En,bind:Ze,binding_callbacks:xe,check_outros:Bn,create_component:Be,destroy_component:Me,detach:Mn,flush:L,get_spread_object:Ln,get_spread_update:Nn,group_outros:An,init:Pn,insert:Rn,mount_component:Le,safe_not_equal:jn,space:qn,transition_in:ce,transition_out:me}=window.__gradio__svelte__internal;function $e(n){let e,t;const l=[{autoscroll:n[2].autoscroll},{i18n:n[2].i18n},n[18]];let o={};for(let s=0;s<l.length;s+=1)o=En(o,l[s]);return e=new Gt({props:o}),e.$on("clear_status",n[21]),{c(){Be(e.$$.fragment)},m(s,r){Le(e,s,r),t=!0},p(s,r){const u=r[0]&262148?Nn(l,[r[0]&4&&{autoscroll:s[2].autoscroll},r[0]&4&&{i18n:s[2].i18n},r[0]&262144&&Ln(s[18])]):{};e.$set(u)},i(s){t||(ce(e.$$.fragment,s),t=!0)},o(s){me(e.$$.fragment,s),t=!1},d(s){Me(e,s)}}}function Jn(n){let e,t,l,o,s,r=n[18]&&$e(n);function u(h){n[22](h)}function a(h){n[23](h)}let _={label:n[4],info:n[7],show_label:n[12],max_lines:n[13],show_copy_button:n[17],container:n[14],speakers:n[5],tags:n[6],placeholder:n[8],show_submit_button:n[20],server:n[3],disabled:!n[19]};return n[0]!==void 0&&(_.value=n[0]),n[1]!==void 0&&(_.value_is_output=n[1]),t=new Tn({props:_}),xe.push(()=>Ze(t,"value",u)),xe.push(()=>Ze(t,"value_is_output",a)),t.$on("change",n[24]),t.$on("input",n[25]),t.$on("submit",n[26]),t.$on("blur",n[27]),t.$on("select",n[28]),t.$on("focus",n[29]),t.$on("copy",n[30]),{c(){r&&r.c(),e=qn(),Be(t.$$.fragment)},m(h,S){r&&r.m(h,S),Rn(h,e,S),Le(t,h,S),s=!0},p(h,S){h[18]?r?(r.p(h,S),S[0]&262144&&ce(r,1)):(r=$e(h),r.c(),ce(r,1),r.m(e.parentNode,e)):r&&(An(),me(r,1,1,()=>{r=null}),Bn());const m={};S[0]&16&&(m.label=h[4]),S[0]&128&&(m.info=h[7]),S[0]&4096&&(m.show_label=h[12]),S[0]&8192&&(m.max_lines=h[13]),S[0]&131072&&(m.show_copy_button=h[17]),S[0]&16384&&(m.container=h[14]),S[0]&32&&(m.speakers=h[5]),S[0]&64&&(m.tags=h[6]),S[0]&256&&(m.placeholder=h[8]),S[0]&1048576&&(m.show_submit_button=h[20]),S[0]&8&&(m.server=h[3]),S[0]&524288&&(m.disabled=!h[19]),!l&&S[0]&1&&(l=!0,m.value=h[0],Ye(()=>l=!1)),!o&&S[0]&2&&(o=!0,m.value_is_output=h[1],Ye(()=>o=!1)),t.$set(m)},i(h){s||(ce(r),ce(t.$$.fragment,h),s=!0)},o(h){me(r),me(t.$$.fragment,h),s=!1},d(h){h&&Mn(e),r&&r.d(h),Me(t,h)}}}function Hn(n){let e,t;return e=new Ft({props:{visible:n[11],elem_id:n[9],elem_classes:n[10],scale:n[15],min_width:n[16],allow_overflow:!0,padding:n[14],$$slots:{default:[Jn]},$$scope:{ctx:n}}}),{c(){Be(e.$$.fragment)},m(l,o){Le(e,l,o),t=!0},p(l,o){const s={};o[0]&2048&&(s.visible=l[11]),o[0]&512&&(s.elem_id=l[9]),o[0]&1024&&(s.elem_classes=l[10]),o[0]&32768&&(s.scale=l[15]),o[0]&65536&&(s.min_width=l[16]),o[0]&16384&&(s.padding=l[14]),o[0]&1995263|o[1]&1&&(s.$$scope={dirty:o,ctx:l}),e.$set(s)},i(l){t||(ce(e.$$.fragment,l),t=!0)},o(l){me(e.$$.fragment,l),t=!1},d(l){Me(e,l)}}}function zn(n,e,t){let{gradio:l}=e,{server:o}=e,{label:s="Dialogue"}=e,{speakers:r=[]}=e,{tags:u=[]}=e,{info:a=void 0}=e,{placeholder:_=void 0}=e,{elem_id:h=""}=e,{elem_classes:S=[]}=e,{visible:m=!0}=e,{value:v=[]}=e,{show_label:J}=e,{max_lines:M=void 0}=e,{container:Y=!0}=e,{scale:g=null}=e,{min_width:b=void 0}=e,{show_copy_button:d=!1}=e,{loading_status:H=void 0}=e,{value_is_output:y=!1}=e,{interactive:q}=e,{show_submit_button:O=!0}=e;const K=()=>l.dispatch("clear_status",H);function I(f){v=f,t(0,v)}function U(f){y=f,t(1,y)}const Q=()=>l.dispatch("change",v),re=()=>l.dispatch("input"),ie=()=>l.dispatch("submit"),T=()=>l.dispatch("blur"),p=f=>l.dispatch("select",f.detail),ue=()=>l.dispatch("focus"),E=f=>l.dispatch("copy",f.detail);return n.$$set=f=>{"gradio"in f&&t(2,l=f.gradio),"server"in f&&t(3,o=f.server),"label"in f&&t(4,s=f.label),"speakers"in f&&t(5,r=f.speakers),"tags"in f&&t(6,u=f.tags),"info"in f&&t(7,a=f.info),"placeholder"in f&&t(8,_=f.placeholder),"elem_id"in f&&t(9,h=f.elem_id),"elem_classes"in f&&t(10,S=f.elem_classes),"visible"in f&&t(11,m=f.visible),"value"in f&&t(0,v=f.value),"show_label"in f&&t(12,J=f.show_label),"max_lines"in f&&t(13,M=f.max_lines),"container"in f&&t(14,Y=f.container),"scale"in f&&t(15,g=f.scale),"min_width"in f&&t(16,b=f.min_width),"show_copy_button"in f&&t(17,d=f.show_copy_button),"loading_status"in f&&t(18,H=f.loading_status),"value_is_output"in f&&t(1,y=f.value_is_output),"interactive"in f&&t(19,q=f.interactive),"show_submit_button"in f&&t(20,O=f.show_submit_button)},[v,y,l,o,s,r,u,a,_,h,S,m,J,M,Y,g,b,d,H,q,O,K,I,U,Q,re,ie,T,p,ue,E]}class fs extends On{constructor(e){super(),Pn(this,e,zn,Hn,jn,{gradio:2,server:3,label:4,speakers:5,tags:6,info:7,placeholder:8,elem_id:9,elem_classes:10,visible:11,value:0,show_label:12,max_lines:13,container:14,scale:15,min_width:16,show_copy_button:17,loading_status:18,value_is_output:1,interactive:19,show_submit_button:20},null,[-1,-1])}get gradio(){return this.$$.ctx[2]}set gradio(e){this.$$set({gradio:e}),L()}get server(){return this.$$.ctx[3]}set server(e){this.$$set({server:e}),L()}get label(){return this.$$.ctx[4]}set label(e){this.$$set({label:e}),L()}get speakers(){return this.$$.ctx[5]}set speakers(e){this.$$set({speakers:e}),L()}get tags(){return this.$$.ctx[6]}set tags(e){this.$$set({tags:e}),L()}get info(){return this.$$.ctx[7]}set info(e){this.$$set({info:e}),L()}get placeholder(){return this.$$.ctx[8]}set placeholder(e){this.$$set({placeholder:e}),L()}get elem_id(){return this.$$.ctx[9]}set elem_id(e){this.$$set({elem_id:e}),L()}get elem_classes(){return this.$$.ctx[10]}set elem_classes(e){this.$$set({elem_classes:e}),L()}get visible(){return this.$$.ctx[11]}set visible(e){this.$$set({visible:e}),L()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),L()}get show_label(){return this.$$.ctx[12]}set show_label(e){this.$$set({show_label:e}),L()}get max_lines(){return this.$$.ctx[13]}set max_lines(e){this.$$set({max_lines:e}),L()}get container(){return this.$$.ctx[14]}set container(e){this.$$set({container:e}),L()}get scale(){return this.$$.ctx[15]}set scale(e){this.$$set({scale:e}),L()}get min_width(){return this.$$.ctx[16]}set min_width(e){this.$$set({min_width:e}),L()}get show_copy_button(){return this.$$.ctx[17]}set show_copy_button(e){this.$$set({show_copy_button:e}),L()}get loading_status(){return this.$$.ctx[18]}set loading_status(e){this.$$set({loading_status:e}),L()}get value_is_output(){return this.$$.ctx[1]}set value_is_output(e){this.$$set({value_is_output:e}),L()}get interactive(){return this.$$.ctx[19]}set interactive(e){this.$$set({interactive:e}),L()}get show_submit_button(){return this.$$.ctx[20]}set show_submit_button(e){this.$$set({show_submit_button:e}),L()}}export{Tn as BaseDialogue,hs as BaseExample,fs as default};
//# sourceMappingURL=Index-k8FxGY8R.js.map
